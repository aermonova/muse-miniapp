<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MUSE ‚Äî –°—Ç–∏–ª–µ–≤–æ–π —Ç–µ—Å—Ç</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Navigation Tabs -->
    <div class="navigation-tabs">
        <div class="tab active" data-tab="test" onclick="switchTab('test')">
            <div class="tab-icon">‚ú®</div>
            <div class="tab-label">–¢–µ—Å—Ç</div>
        </div>
        <div class="tab" data-tab="library" onclick="switchTab('library')">
            <div class="tab-icon">üìö</div>
            <div class="tab-label">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</div>
        </div>
        <div class="tab" data-tab="archetype" onclick="switchTab('archetype')">
            <div class="tab-icon">üí´</div>
            <div class="tab-label">–ú–æ–π —Ç–∏–ø–∞–∂</div>
        </div>
    </div>

    <!-- Test Section -->
    <div id="testSection" class="section active">
        <div class="app-container">
            <!-- Welcome Screen -->
            <div id="welcomeScreen" class="screen active">
                <div class="welcome-content">
                    <div class="logo">
                        <img src="assets/images/logo.png" alt="MUSE" class="logo-image">
                        <div class="logo-subtitle">—É–∑–Ω–∞–π —Å–≤–æ–π —Ç–∏–ø–∞–∂</div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="startTest()">
                        ‚ú® –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
                    </button>
                </div>
            </div>

            <!-- Rules Screen -->
            <div id="rulesScreen" class="screen">
                <div class="rules-content">
                    <h2 class="screen-title">–ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ—Å—Ç—ã–µ</h2>
                    <p class="rules-text">
                        –í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –±–ª–∏–∂–µ –ø–æ –æ—â—É—â–µ–Ω–∏—è–º ‚Äî 
                        –Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–æ–ª–≥–æ ‚ú®
                    </p>
                    <button class="btn btn-primary" onclick="showFirstQuestion()">
                        üöÄ –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
                    </button>
                </div>
            </div>

            <!-- Question Screen -->
            <div id="questionScreen" class="screen">
                <!-- Progress Bar -->
                <div class="progress-container">
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                    <div id="progressText" class="progress-text">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 6</div>
                </div>

                <!-- Question Image -->
                <div class="question-image-container">
                    <img id="questionImage" src="" alt="Question image" class="question-image">
                </div>

                <!-- Question Text -->
                <h2 id="questionText" class="question-title"></h2>

                <!-- Answer Options -->
                <div id="answerOptions" class="answer-options"></div>

                <!-- Navigation -->
                <div class="navigation-buttons">
                    <button id="backButton" class="btn btn-secondary" onclick="previousQuestion()" style="display:none">
                        ‚Üê –ù–∞–∑–∞–¥
                    </button>
                </div>
            </div>

            <!-- Result Screen -->
            <div id="resultScreen" class="screen">
                <div class="result-content">
                    <div class="result-badge">–¢–≤–æ–π —Ç–∏–ø–∞–∂</div>
                    <h1 id="resultTitle" class="result-title"></h1>
                    
                    <div id="resultImage" class="result-image-container"></div>
                    
                    <p id="resultDescription" class="result-description"></p>
                    
                    <div class="result-actions">
                        <button class="btn btn-primary" onclick="shareResult()">
                            üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
                        </button>
                        <button class="btn btn-outline" onclick="openChannel()">
                            üì¢ –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞–Ω–∞–ª MUSE
                        </button>
                        <button class="btn btn-secondary" onclick="restartTest()">
                            üîÑ –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Library Section -->
    <div id="librarySection" class="section">
        <div class="library-container">
            <!-- Filters -->
            <div class="filters-container">
                <div class="filter-chip active" data-filter="all" onclick="filterLibrary('all')">–í—Å–µ</div>
                <div class="filter-chip" data-filter="useful" onclick="filterLibrary('useful')">–ü–æ–ª–µ–∑–Ω–æ–µ</div>
                <div class="filter-chip" data-filter="archetypes" onclick="filterLibrary('archetypes')">–ü—Ä–æ —Ç–∏–ø–∞–∂–∏</div>
                <div class="filter-chip" data-filter="fun" onclick="filterLibrary('fun')">For fun</div>
                <div class="filter-chip" data-filter="celebrities" onclick="filterLibrary('celebrities')">–ó–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç–∏</div>
                <div class="filter-chip" data-filter="store" onclick="filterLibrary('store')">Muse Store</div>
            </div>

            <!-- Content Cards -->
            <div id="libraryCards" class="library-cards"></div>
        </div>
    </div>

    <!-- My Archetype Section -->
    <div id="archetypeSection" class="section">
        <div class="archetype-container">
            <!-- Prompt to take test (if not completed) -->
            <div id="archetypePrompt" class="archetype-prompt">
                <h2 class="prompt-title">–ü—Ä–æ–π–¥–∏ —Ç–µ—Å—Ç, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —Å–≤–æ–π —Ç–∏–ø–∞–∂</h2>
                <button class="btn btn-primary" onclick="switchTab('test')">
                    ‚ú® –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç
                </button>
            </div>

            <!-- Archetype page (if test completed) -->
            <div id="archetypePage" class="archetype-page" style="display:none;">
                <!-- Header -->
                <div class="archetype-header">
                    <div class="archetype-badge">–¢–≤–æ–π —Ç–∏–ø–∞–∂</div>
                    <h1 id="archetypeTitle" class="archetype-title"></h1>
                    <p id="archetypeTagline" class="archetype-tagline"></p>
                </div>

                <!-- Description -->
                <div class="archetype-block">
                    <p id="archetypeDescription" class="archetype-description"></p>
                    <div id="archetypeVibe" class="archetype-vibe-badge"></div>
                </div>

                <!-- Color Palette -->
                <div class="archetype-block">
                    <h3 class="block-title">–¢–≤–æ—è –ø–∞–ª–∏—Ç—Ä–∞</h3>
                    <div id="colorPalette" class="color-palette"></div>
                </div>

                <!-- Recommendations -->
                <div class="archetype-block">
                    <h3 class="block-title">–ß—Ç–æ —Ç–µ–±–µ –∏–¥—ë—Ç</h3>
                    <div id="recommendations" class="recommendations-grid"></div>
                </div>

                <!-- Actions -->
                <div class="archetype-actions">
                    <button class="btn btn-primary" onclick="shareArchetypeResult()">
                        üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
                    </button>
                    <button class="btn btn-outline" onclick="openArchetypePost()">
                        üìñ –ß–∏—Ç–∞—Ç—å –ø—Ä–æ —Å–≤–æ–π —Ç–∏–ø–∞–∂
                    </button>
                    <button class="btn btn-secondary" onclick="retakeTest()">
                        üîÑ –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
